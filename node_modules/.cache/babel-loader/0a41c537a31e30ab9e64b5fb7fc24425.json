{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/q/Documents/WebDocuments/ChessReact/chess/src/components/Board/Board.js\";\nimport React, { Component } from 'react';\nimport './Board.css';\nimport Square from '../Square/Square'; // TYPES \n// PAWN - 0 \n// BISHOP - 1 \n// KNIGHT - 2 \n// ROOK - 3 \n// QUEEN - 4 \n// KING - 5\n\nconst startingPosition = {\n  // position: [type, color]\n  //PAWNS \n  21: [0, 1],\n  22: [0, 1],\n  23: [0, 1],\n  24: [0, 1],\n  25: [0, 1],\n  26: [0, 1],\n  27: [0, 1],\n  28: [0, 1],\n  71: [0, -1],\n  72: [0, -1],\n  73: [0, -1],\n  74: [0, -1],\n  75: [0, -1],\n  76: [0, -1],\n  77: [0, -1],\n  78: [0, -1],\n  81: [3, -1],\n  11: [3, 1],\n  88: [3, -1],\n  18: [3, 1],\n  // ROOKS \n  82: [2, -1],\n  13: [2, 1],\n  17: [2, 1],\n  87: [2, -1],\n  // KNIGHTS \n  83: [1, -1],\n  86: [1, -1],\n  12: [1, 1],\n  16: [1, 1],\n  // BISHOPS \n  14: [4, 1],\n  84: [4, -1],\n  //QUEENS \n  15: [5, 1],\n  85: [5, -1] //KINGS \n\n};\nconst boardLayout = [81, 82, 83, 84, 85, 86, 87, 88, 71, 72, 73, 74, 75, 76, 77, 78, 61, 62, 63, 64, 65, 66, 67, 68, 51, 52, 53, 54, 55, 56, 57, 58, 41, 42, 43, 44, 45, 46, 47, 48, 31, 32, 33, 34, 35, 36, 37, 38, 21, 22, 23, 24, 25, 26, 27, 28, 11, 12, 13, 14, 15, 16, 17, 18];\nconst colorSwitch = [1, -1];\n\nclass Board extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleClick = e => {\n      console.log(\"square\", e);\n    };\n\n    this.handlePieceClick = (e, position) => {\n      this.state.squares[position].availableMoves();\n    };\n\n    this.hasPiece = square => {\n      return this.state.squares[square];\n    };\n\n    this.initSquares = () => {\n      let squares = [];\n      let currentMove = this.props.currentMove;\n      squares[currentMove] = [];\n      let click = this.handleClick;\n      let pclick = this.handlePieceClick;\n      let r = 8;\n      let c = 1;\n      let bgs = ['black', 'white'];\n      let tick = 0;\n      let onDrop = this.props.onDrop;\n\n      for (let i = 0; i < 64; i++) {\n        let pos = Number('' + c + r);\n        squares[0][pos] = {\n          key: '' + c + r,\n          row: r,\n          column: c,\n          background: bgs[tick],\n          piece: startingPosition[pos],\n          output: function () {\n            let p = this.piece ? this.piece : null;\n            return /*#__PURE__*/_jsxDEV(Square, {\n              onClick: click,\n              onDrop: onDrop,\n              row: this.row,\n              pieceClick: pclick,\n              column: this.column,\n              background: this.background,\n              piece: p\n            }, currentMove + '/' + this.column + this.row, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 13\n            }, this);\n          },\n          hasPiece: function () {\n            return this.piece === null || this.piece === undefined ? false : true;\n          },\n          color: function () {\n            return this.hasPiece() ? this.piece[1] : false;\n          },\n          type: function () {\n            return this.hasPiece() ? this.piece[0] : false;\n          }\n        };\n        c++;\n\n        if (c > 8) {\n          c = 1;\n          r--;\n        } else tick = tick === 0 ? 1 : 0;\n      }\n\n      return squares;\n    };\n\n    this.renderSquares = squares => {\n      let render = [];\n      boardLayout.forEach(element => {\n        render.push(squares[element].output());\n      });\n      return render;\n    };\n\n    let {\n      onDrop: _onDrop,\n      moveHistory,\n      currentMove: _currentMove\n    } = props;\n    this.state = {\n      squares: this.initSquares(),\n      handleClick: this.handleClick,\n      handlePieceClick: this.handlePieceClick,\n      colorToMove: 1,\n      currentMove: _currentMove\n    };\n  }\n\n  movePiece(origin, target) {\n    // origin, target are the respective squares \n    if (origin === target) return;\n    if (this.state.squares[origin].color() !== this.state.colorToMove) return;\n    let squares_copy = [...this.state.squares];\n    let colorToMove = this.state.colorToMove;\n    if (squares_copy[target].hasPiece() && squares_copy[target].color() === squares_copy[origin].color()) return;\n    squares_copy[target].piece = squares_copy[origin].piece;\n    squares_copy[origin].piece = null;\n    this.setState({\n      squares: squares_copy\n    });\n    this.setState({\n      colorToMove: colorToMove === 1 ? -1 : 1\n    });\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    let {\n      moveHistory,\n      currentMove,\n      lastMove\n    } = props;\n    let squares_copy = [...state.squares]; // console.log(currentMove);\n\n    if (currentMove > 0) {\n      squares_copy[currentMove] = squares_copy[currentMove - 1]; // console.log('Board-JS, squares-copy current move', squares_copy[currentMove]);\t\n    }\n\n    return {\n      squares: squares_copy\n    };\n  } // shouldComponentUpdate(){\n  // \tconsole.log(this.props);\n  // \treturn false;\n  // }\n\n\n  componentDidMount() {}\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"board\",\n      children: [\" \", this.renderSquares(this.state.squares[this.props.currentMove])]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default Board;","map":{"version":3,"sources":["/Users/q/Documents/WebDocuments/ChessReact/chess/src/components/Board/Board.js"],"names":["React","Component","Square","startingPosition","boardLayout","colorSwitch","Board","constructor","props","handleClick","e","console","log","handlePieceClick","position","state","squares","availableMoves","hasPiece","square","initSquares","currentMove","click","pclick","r","c","bgs","tick","onDrop","i","pos","Number","key","row","column","background","piece","output","p","undefined","color","type","renderSquares","render","forEach","element","push","moveHistory","colorToMove","movePiece","origin","target","squares_copy","setState","getDerivedStateFromProps","lastMove","componentDidMount"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Board.css'; \nimport Square from '../Square/Square';\n\n\n// TYPES \n// PAWN - 0 \n// BISHOP - 1 \n// KNIGHT - 2 \n// ROOK - 3 \n// QUEEN - 4 \n// KING - 5\nconst startingPosition = \n{\n\t// position: [type, color]\n\t//PAWNS \n\t21: [0, 1], 22: [0, 1], 23: [0, 1], 24: [0, 1], 25: [0, 1], 26: [0, 1], 27: [0, 1], 28: [0, 1],\n\t71: [0, -1], 72: [0, -1], 73: [0, -1], 74: [0, -1], 75: [0, -1], 76: [0, -1], 77: [0, -1], 78: [0, -1],\n\t\n\t81: [3, -1], 11: [3, 1], 88: [3, -1], 18: [3, 1], // ROOKS \n\t82: [2, -1], 13: [2,1], 17:[2,1], 87: [2,-1], // KNIGHTS \n\t83: [1,-1], 86: [1,-1], 12: [1,1], 16: [1,1], // BISHOPS \n\t14: [4,1], 84: [4,-1], //QUEENS \n\t15: [5,1], 85: [5,-1] //KINGS \n};\nconst boardLayout = \n[81,82,83,84,85,86,87,88,\n71,72,73,74,75,76,77,78,\n61,62,63,64,65,66,67,68,\n51,52,53,54,55,56,57,58,\n41,42,43,44,45,46,47,48,\n31,32,33,34,35,36,37,38,\n21,22,23,24,25,26,27,28,\n11,12,13,14,15,16,17,18\n];\nconst colorSwitch = [1, -1];\n\nclass Board extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tlet {onDrop, moveHistory, currentMove} = props;\n\t\tthis.state = {\n\t\t\tsquares: this.initSquares(),\n\t\t\thandleClick: this.handleClick,\n\t\t\thandlePieceClick: this.handlePieceClick,\n\t\t\tcolorToMove: 1,\n\t\t\tcurrentMove: currentMove\n\t\t};\n\t}\n\n\thandleClick = (e) => {\n\t\tconsole.log(\"square\", e);\n\t};\n\n\thandlePieceClick = (e, position) => {\n\t\tthis.state.squares[position].availableMoves();\n\n\t};\n\t// dropHandler = (e) => {\n\t// \te.preventDefault();\n\t// \tlet target = e.target.dataset.position; \n\t// \tlet origin = e.dataTransfer.getData(\"text/plain\");\n\t// \tthis.movePiece(origin, target)\n\t// };\n\n\n\thasPiece = (square) => {\n\t\treturn this.state.squares[square]\n\t}\n\n\tmovePiece(origin, target){ // origin, target are the respective squares \n\t\tif(origin===target) return;\n\t\tif(this.state.squares[origin].color()!==this.state.colorToMove) return;\n\n\t\tlet squares_copy = [...this.state.squares];\n\t\tlet colorToMove = this.state.colorToMove;\n\n\t\tif(squares_copy[target].hasPiece() && squares_copy[target].color() === squares_copy[origin].color()) return; \n\n\t\tsquares_copy[target].piece = squares_copy[origin].piece;\n\t\tsquares_copy[origin].piece = null;\n\t\tthis.setState({squares: squares_copy});\n\t\tthis.setState({\n\t\t\tcolorToMove: colorToMove === 1? -1 : 1\n\t\t})\n\t}\n\n\tinitSquares = () => {\n\t\tlet squares = [];\n\t\tlet currentMove = this.props.currentMove;\n\t\tsquares[currentMove] = [];\n\t\tlet click = this.handleClick;\n\t\tlet pclick = this.handlePieceClick;\n\t\tlet r = 8;\n\t\tlet c = 1; \n\t\tlet bgs = ['black', 'white'];\n\t\tlet tick = 0; \n\t\tlet onDrop = this.props.onDrop;\n\t\tfor(let i =0;i<64;i++){\n\t\t\tlet pos = Number(''+c+r);\n\t\t\tsquares[0][pos] = {\n\t\t\t\tkey: ''+c+r,\n\t\t\t\trow: r,\n\t\t\t\tcolumn: c,\n\t\t\t\tbackground: bgs[tick],\n\t\t\t\tpiece: startingPosition[pos],\n\t\t\t\toutput: function(){\n\t\t\t\t\tlet p = this.piece ? this.piece : null; \n\t\t\t\t\treturn <Square key={currentMove+'/'+this.column+this.row} onClick={click} onDrop={onDrop} row={this.row} pieceClick={pclick} column={this.column} background={this.background} piece={p} />;\n\t\t\t\t},\n\t\t\t\thasPiece: function(){\n\t\t\t\t\treturn (this.piece===null||this.piece===undefined) ? false : true; \n\t\t\t\t},\n\t\t\t\tcolor: function(){\n\t\t\t\t\treturn this.hasPiece() ? this.piece[1] : false;  \n\t\t\t\t},\n\t\t\t\ttype: function(){\n\t\t\t\t\treturn this.hasPiece() ? this.piece[0] : false;  \n\t\t\t\t}\n\t\t\t};\n\t\t\tc++; \n\t\t\tif(c>8){\n\t\t\t\tc = 1; \n\t\t\t\tr--;\n\t\t\t}else tick = tick === 0 ? 1 : 0;\n\t\t}\n\t\treturn squares; \n\t};\n\n\trenderSquares = (squares) => {\n\t\tlet render = [];\n\t\tboardLayout.forEach(element => {\n\t\t\trender.push(squares[element].output());\n\t\t});\n\t\treturn render; \n\t};\n\n\n\tstatic getDerivedStateFromProps(props, state) {\n    \tlet {moveHistory, currentMove, lastMove} = props; \n    \tlet squares_copy = [...state.squares]; \n    \t// console.log(currentMove);\n    \tif(currentMove>0){\n    \t\tsquares_copy[currentMove] = squares_copy[currentMove-1];\n    \t\t// console.log('Board-JS, squares-copy current move', squares_copy[currentMove]);\t\n    \t}\n    \treturn {squares: squares_copy};\n    }\n\n \t// shouldComponentUpdate(){\n \t// \tconsole.log(this.props);\n \t// \treturn false;\n \t// }\n\n \tcomponentDidMount() {\n \t\t\n \t}\n\n\trender(){\n\t\treturn ( <div id=\"board\"> {this.renderSquares(this.state.squares[this.props.currentMove])}</div> );\n\t}\n}\nexport default Board; "]},"metadata":{},"sourceType":"module"}