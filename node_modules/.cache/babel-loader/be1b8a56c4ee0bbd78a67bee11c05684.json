{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/q/Documents/WebDocuments/ChessReact/chess/src/App.js\";\nimport './App.css';\nimport React, { Component } from 'react'; // import Board from './components/Board/Board';\n\nimport Moves from './components/Moves/Moves';\nimport Square from './components/Square/Square'; // TYPES \n// PAWN - 0 \n// BISHOP - 1 \n// KNIGHT - 2 \n// ROOK - 3 \n// QUEEN - 4 \n// KING - 5\n\nconst startingPosition = {\n  // position: [type, color]\n  //PAWNS \n  21: [0, 1],\n  22: [0, 1],\n  23: [0, 1],\n  24: [0, 1],\n  25: [0, 1],\n  26: [0, 1],\n  27: [0, 1],\n  28: [0, 1],\n  71: [0, -1],\n  72: [0, -1],\n  73: [0, -1],\n  74: [0, -1],\n  75: [0, -1],\n  76: [0, -1],\n  77: [0, -1],\n  78: [0, -1],\n  81: [3, -1],\n  11: [3, 1],\n  88: [3, -1],\n  18: [3, 1],\n  // ROOKS \n  82: [2, -1],\n  13: [2, 1],\n  17: [2, 1],\n  87: [2, -1],\n  // KNIGHTS \n  83: [1, -1],\n  86: [1, -1],\n  12: [1, 1],\n  16: [1, 1],\n  // BISHOPS \n  14: [4, 1],\n  84: [4, -1],\n  //QUEENS \n  15: [5, 1],\n  85: [5, -1] //KINGS \n\n};\nconst boardLayout = [81, 82, 83, 84, 85, 86, 87, 88, 71, 72, 73, 74, 75, 76, 77, 78, 61, 62, 63, 64, 65, 66, 67, 68, 51, 52, 53, 54, 55, 56, 57, 58, 41, 42, 43, 44, 45, 46, 47, 48, 31, 32, 33, 34, 35, 36, 37, 38, 21, 22, 23, 24, 25, 26, 27, 28, 11, 12, 13, 14, 15, 16, 17, 18];\n\nclass App extends Component {\n  constructor() {\n    super(); // this.initSquares=this.initSquares.bind(this);\n    // this.renderSquares=this.renderSquares.bind(this);\n\n    this.initSquares = currentMove => {\n      let squares = [];\n      let click = this.handleClick;\n      let pclick = this.handlePieceClick;\n      let r = 8;\n      let c = 1;\n      let bgs = ['black', 'white'];\n      let tick = 0;\n      let onDrop = this.dropHandler;\n\n      for (let i = 0; i < 64; i++) {\n        let pos = Number('' + c + r);\n        squares[pos] = {\n          key: '' + c + r,\n          row: r,\n          column: c,\n          background: bgs[tick],\n          piece: startingPosition[pos],\n          output: function () {\n            let p = this.piece ? this.piece : null;\n            return /*#__PURE__*/_jsxDEV(Square, {\n              onClick: click,\n              onDrop: onDrop,\n              row: this.row,\n              pieceClick: pclick,\n              column: this.column,\n              background: this.background,\n              piece: p\n            }, currentMove + '/' + this.column + this.row, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 18\n            }, this);\n          },\n          hasPiece: function () {\n            return this.piece === null || this.piece === undefined ? false : true;\n          },\n          color: function () {\n            return this.hasPiece() ? this.piece[1] : false;\n          },\n          type: function () {\n            return this.hasPiece() ? this.piece[0] : false;\n          }\n        };\n        c++;\n\n        if (c > 8) {\n          c = 1;\n          r--;\n        } else tick = tick === 0 ? 1 : 0;\n      }\n\n      return squares;\n    };\n\n    this.renderSquares = squares => {\n      let render = [];\n      boardLayout.forEach(element => {\n        render.push(squares[element].output());\n      });\n      return render;\n    };\n\n    this.handleClick = e => {\n      console.log(this.state.squares_history);\n      this.setState(prevState => ({\n        squares: [...this.state.squares_history[0]]\n      }));\n    };\n\n    this.handlePieceClick = (e, position) => {\n      this.state.squares[position].availableMoves();\n    };\n\n    this.dropHandler = e => {\n      e.preventDefault();\n      e.target.classList.remove('dragover');\n      let target = e.target.dataset.position;\n      let origin = e.dataTransfer.getData(\"text/plain\"); // console.log(`origin: ${origin}, target: ${target}`);\n\n      this.newMove(origin, target);\n    };\n\n    this.state = {\n      // moveHistory: [],\n      currentMove: 0,\n      lastMove: null,\n      colorToMove: 1,\n      selectedMove: 0,\n      squares: this.initSquares(0),\n      squares_history: []\n    };\n  }\n\n  switchColor() {\n    return this.state.colorToMove === 1 ? -1 : 1;\n  }\n\n  newMove(from, to) {\n    let squares_copy = [...this.state.squares];\n    if (squares_copy[from].color() !== this.state.colorToMove) return;\n    if (squares_copy[from].color() === squares_copy[to].color()) return;\n    let type = squares_copy[from].piece.type();\n    squares_copy[to].piece = squares_copy[from].piece;\n    squares_copy[from].piece = null; // let history_copy = [...this.state.moveHistory];\n    // history_copy.push(to);\n\n    let squares_history_copy = this.state.squares_history;\n    squares_history_copy[this.state.currentMove] = [...this.state.squares];\n    this.setState(prevState => ({\n      squares: squares_copy,\n      squares_history: squares_history_copy,\n      lastMove: [type, to],\n      // moveHistory: history_copy,\n      currentMove: prevState.currentMove + 1,\n      colorToMove: this.switchColor()\n    }));\n  }\n\n  movePiece(from, to) {// let moveHistory_copy = [...this.state.moveHistory];\n    // moveHistory_copy.push(to); \n    // // let newMove = [from ,to];\n    // // let colorToMove = this.state.colorToMove;\n    // // if(colorToMove===1){\n    // //   moveHistory_copy.push([newMove]); \n    // //   colorToMove=-1;\n    // // }else if(colorToMove===-1){\n    // //   moveHistory_copy[moveHistory_copy.length-1].push([newMove]); \n    // //   colorToMove = 1;\n    // // }\n    // this.setState(prevState => ({\n    //   moveHistory: moveHistory_copy, \n    //   lastMove: [from, to],\n    //   currentMove: prevState.currentMove+1,\n    //   colorToMove: this.switchColor()\n    // }));\n  }\n\n  render() {\n    let {\n      squares,\n      currentMove\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board\",\n        children: this.renderSquares(squares)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"moves\",\n        children: /*#__PURE__*/_jsxDEV(Moves, {\n          lastMove: this.state.lastMove\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 6\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/q/Documents/WebDocuments/ChessReact/chess/src/App.js"],"names":["React","Component","Moves","Square","startingPosition","boardLayout","App","constructor","initSquares","currentMove","squares","click","handleClick","pclick","handlePieceClick","r","c","bgs","tick","onDrop","dropHandler","i","pos","Number","key","row","column","background","piece","output","p","hasPiece","undefined","color","type","renderSquares","render","forEach","element","push","e","console","log","state","squares_history","setState","prevState","position","availableMoves","preventDefault","target","classList","remove","dataset","origin","dataTransfer","getData","newMove","lastMove","colorToMove","selectedMove","switchColor","from","to","squares_copy","squares_history_copy","movePiece"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, { Component } from 'react';\n// import Board from './components/Board/Board';\nimport Moves from './components/Moves/Moves';\nimport Square from './components/Square/Square';\n\n\n// TYPES \n// PAWN - 0 \n// BISHOP - 1 \n// KNIGHT - 2 \n// ROOK - 3 \n// QUEEN - 4 \n// KING - 5\nconst startingPosition = \n{\n  // position: [type, color]\n  //PAWNS \n  21: [0, 1], 22: [0, 1], 23: [0, 1], 24: [0, 1], 25: [0, 1], 26: [0, 1], 27: [0, 1], 28: [0, 1],\n  71: [0, -1], 72: [0, -1], 73: [0, -1], 74: [0, -1], 75: [0, -1], 76: [0, -1], 77: [0, -1], 78: [0, -1],\n  \n  81: [3, -1], 11: [3, 1], 88: [3, -1], 18: [3, 1], // ROOKS \n  82: [2, -1], 13: [2,1], 17:[2,1], 87: [2,-1], // KNIGHTS \n  83: [1,-1], 86: [1,-1], 12: [1,1], 16: [1,1], // BISHOPS \n  14: [4,1], 84: [4,-1], //QUEENS \n  15: [5,1], 85: [5,-1] //KINGS \n};\nconst boardLayout = \n[81,82,83,84,85,86,87,88,\n71,72,73,74,75,76,77,78,\n61,62,63,64,65,66,67,68,\n51,52,53,54,55,56,57,58,\n41,42,43,44,45,46,47,48,\n31,32,33,34,35,36,37,38,\n21,22,23,24,25,26,27,28,\n11,12,13,14,15,16,17,18\n];\n\nclass App extends Component {\n  constructor(){\n    super();\n    // this.initSquares=this.initSquares.bind(this);\n    // this.renderSquares=this.renderSquares.bind(this);\n    this.state = {\n      // moveHistory: [],\n      currentMove: 0,\n      lastMove: null,\n      colorToMove: 1,\n      selectedMove: 0,\n      squares: this.initSquares(0),\n      squares_history: [],\n    };  \n  }\n\n  initSquares = (currentMove) => {\n    let squares = [];\n    let click = this.handleClick;\n    let pclick = this.handlePieceClick;\n    let r = 8;\n    let c = 1; \n    let bgs = ['black', 'white'];\n    let tick = 0; \n    let onDrop = this.dropHandler;\n    for(let i =0;i<64;i++){\n      let pos = Number(''+c+r);\n      squares[pos] = {\n        key: ''+c+r,\n        row: r,\n        column: c,\n        background: bgs[tick],\n        piece: startingPosition[pos],\n        output: function(){\n          let p = this.piece ? this.piece : null; \n          return <Square key={currentMove+'/'+this.column+this.row} onClick={click} onDrop={onDrop} row={this.row} pieceClick={pclick} column={this.column} background={this.background} piece={p} />;\n        },\n        hasPiece: function(){\n          return (this.piece===null||this.piece===undefined) ? false : true; \n        },\n        color: function(){\n          return this.hasPiece() ? this.piece[1] : false;  \n        },\n        type: function(){\n          return this.hasPiece() ? this.piece[0] : false;  \n        }\n      };\n      c++; \n      if(c>8){\n        c = 1; \n        r--;\n      }else tick = tick === 0 ? 1 : 0;\n    }\n    return squares; \n  };\n\n  renderSquares = (squares) => {\n    let render = [];\n    boardLayout.forEach(element => {\n      render.push(squares[element].output());\n    });\n    return render; \n  };\n\n  handleClick = (e) => {\n    console.log(this.state.squares_history);\n    this.setState(prevState=>({\n      squares: [...this.state.squares_history[0]]\n    }));\n  };\n\n  handlePieceClick = (e, position) => {\n    this.state.squares[position].availableMoves();\n  }\n\n  dropHandler = (e) => {\n    e.preventDefault();\n    e.target.classList.remove('dragover');\n    let target = e.target.dataset.position; \n    let origin = e.dataTransfer.getData(\"text/plain\");\n    // console.log(`origin: ${origin}, target: ${target}`);\n    this.newMove(origin, target)\n  };\n\n  switchColor(){\n    return this.state.colorToMove === 1 ? -1 : 1; \n  }\n\n  newMove(from, to){\n    let squares_copy = [...this.state.squares];\n    if(squares_copy[from].color()!==this.state.colorToMove) return; \n    if(squares_copy[from].color()===squares_copy[to].color()) return; \n    \n    let type = squares_copy[from].piece.type();\n\n    squares_copy[to].piece = squares_copy[from].piece;\n    squares_copy[from].piece = null; \n    \n    // let history_copy = [...this.state.moveHistory];\n    // history_copy.push(to);\n    \n    let squares_history_copy = this.state.squares_history;\n    squares_history_copy[this.state.currentMove] = [...this.state.squares]\n\n    this.setState(prevState => ({\n      squares: squares_copy,\n      squares_history: squares_history_copy,\n      lastMove: [type, to], \n      // moveHistory: history_copy,\n      currentMove: prevState.currentMove+1,\n      colorToMove: this.switchColor()\n    }));\n  };\n\n  movePiece(from, to){\n    // let moveHistory_copy = [...this.state.moveHistory];\n    // moveHistory_copy.push(to); \n    // // let newMove = [from ,to];\n    // // let colorToMove = this.state.colorToMove;\n\n    // // if(colorToMove===1){\n    // //   moveHistory_copy.push([newMove]); \n    // //   colorToMove=-1;\n    // // }else if(colorToMove===-1){\n    // //   moveHistory_copy[moveHistory_copy.length-1].push([newMove]); \n    // //   colorToMove = 1;\n    // // }\n    // this.setState(prevState => ({\n    //   moveHistory: moveHistory_copy, \n    //   lastMove: [from, to],\n    //   currentMove: prevState.currentMove+1,\n    //   colorToMove: this.switchColor()\n    // }));\n  }\n\n  render(){\n    let {squares, currentMove} = this.state;\n    return(\n    \t<div className='container'>\n\t    \t<div className=\"board\"> \n          {this.renderSquares(squares)}\n\t    \t\t{/*<Board onDrop={this.dropHandler} lastMove={this.state.lastMove} moveHistory={this.state.moveHistory} currentMove={this.state.currentMove} />*/}\n      \t</div>\n      \t\t<div className='moves' >\n      \t\t\t<Moves lastMove={this.state.lastMove} /> \n      \t\t</div>\n      \t</div> \n    );\n  }   \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}